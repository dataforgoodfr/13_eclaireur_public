on:
    pull_request_target:
      types: [opened, closed, synchronize, reopened]
      branches: [ main ]
      paths:
      - 'front/**'

jobs: 
    deploy:
        name: Deploy/redeploy review app
        runs-on: ubuntu-latest
        permissions:
            issues: write
            pull-requests: write
            contents: read
        steps:
          - name: Create review app
            uses: CleverCloud/clever-cloud-review-app@main
            env:
                CLEVER_SECRET: ${{ secrets.CLEVER_SECRET }}
                CLEVER_TOKEN: ${{ secrets.CLEVER_TOKEN }}
                ORGA_ID: ${{ secrets.ORGA_ID }}
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            with:
                type: node
                set-env: true
